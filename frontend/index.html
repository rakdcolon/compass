<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compass â€” AI Benefits Navigator</title>

  <!-- Typography: Plus Jakarta Sans â€” humanist, warm, accessible -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400&display=swap" rel="stylesheet" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        fontFamily: { sans: ['Plus Jakarta Sans', 'system-ui', 'sans-serif'] },
        extend: {
          colors: {
            forest: { DEFAULT: '#15803D', 50: '#F0FDF4', 100: '#DCFCE7', 600: '#16A34A', 700: '#166534' },
            ember:  { DEFAULT: '#EA580C', 50: '#FFF7ED', 100: '#FFEDD5', 600: '#DC4B08', 700: '#C2410C' },
            cream:  { DEFAULT: '#F9F5EE', 100: '#F3EDE2', 200: '#EBE0D0' },
          }
        }
      }
    }
  </script>

  <!-- GSAP â€” animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <link rel="stylesheet" href="/static/css/styles.css?v=10" />

  <style>
    body { background: #FAFAF9 !important; }

    /* Persona card gradient top bars */
    .bar-ember   { background: linear-gradient(90deg, #ea580c, #f97316); }
    .bar-sky     { background: linear-gradient(90deg, #0ea5e9, #38bdf8); }
    .bar-forest  { background: linear-gradient(90deg, #15803d, #22c55e); }

    /* Hero headline size bump */
    @media (min-width: 640px) { .hero-h1 { font-size: 4rem; } }
    @media (min-width: 768px) { .hero-h1 { font-size: 4.75rem; } }

    /* Floating nav glassmorphism */
    .nav-glass {
      background: rgba(255,255,255,0.80);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      border-bottom: 1px solid rgba(255,255,255,0.6);
      box-shadow: 0 1px 20px rgba(21,128,61,0.06), 0 1px 4px rgba(28,25,23,0.04);
    }

    /* Demo divider label */
    .demo-label {
      background: linear-gradient(90deg, #ea580c, #f97316);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: #ea580c;
    }

    /* Chat view left panel polish */
    .chat-left-panel {
      background: rgba(255,255,255,0.94);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(229,221,211,0.8);
      box-shadow: 0 4px 24px rgba(28,25,23,0.06);
    }

    /* Nova model footer dots */
    .nova-footer-dot {
      width: 6px; height: 6px; border-radius: 50%;
      background: linear-gradient(135deg, #ea580c, #f97316);
      display: inline-block;
      box-shadow: 0 0 6px rgba(234,88,12,0.4);
    }
  </style>
</head>
<body class="min-h-screen text-[#1C1917] font-sans antialiased">

  <!-- ===== NAVIGATION ===== -->
  <nav class="nav-glass fixed top-0 left-0 right-0 z-50 h-14">
    <div class="max-w-6xl mx-auto px-5 h-full flex items-center justify-between">
      <div class="flex items-center gap-2.5">
        <div class="compass-logo-icon w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
            <circle cx="12" cy="12" r="10"/><polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88"/>
          </svg>
        </div>
        <span class="font-bold text-base text-[#1C1917] tracking-tight leading-none">Compass</span>
        <span class="text-[11px] text-[#A8A29E] hidden sm:block leading-none">AI Benefits Navigator</span>
        <span id="demo-badge" class="hidden text-xs text-ember font-semibold bg-ember-50/80 border border-[#FED7AA] px-2 py-0.5 rounded-full">Demo Mode</span>
      </div>
      <div class="flex items-center gap-1.5">
        <span class="text-[11px] text-[#C4BDB5]">Powered by</span>
        <span class="text-[11px] font-bold" style="background:linear-gradient(90deg,#ea580c,#f97316);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Amazon Nova</span>
      </div>
    </div>
  </nav>

  <!-- ===== NOVA MODEL ACTIVITY STRIP (chat view only) ===== -->
  <div id="model-strip" class="hidden fixed top-14 left-0 right-0 z-40 border-b border-[#E5DDD3]/60 px-5 py-2" style="background:rgba(255,255,255,0.85);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);">
    <div class="max-w-6xl mx-auto flex items-center gap-2.5">
      <span class="text-xs text-[#A8A29E] mr-1 font-medium">Active:</span>
      <button onclick="window.open('https://docs.aws.amazon.com/nova/latest/userguide/what-is-nova.html','_blank')" class="model-pill" id="pill-lite" title="Nova 2 Lite â€” Multi-agent reasoning & tool use">
        <span class="pill-dot"></span>Nova 2 Lite
      </button>
      <button onclick="window.open('https://docs.aws.amazon.com/nova/latest/userguide/speech.html','_blank')" class="model-pill" id="pill-sonic" title="Nova 2 Sonic â€” Real-time voice conversation">
        <span class="pill-dot"></span>Nova 2 Sonic
      </button>
      <button onclick="window.open('https://docs.aws.amazon.com/nova/latest/userguide/nova-embeddings.html','_blank')" class="model-pill" id="pill-embed" title="Nova Embeddings â€” Multimodal document matching">
        <span class="pill-dot"></span>Nova Embeddings
      </button>
      <button onclick="window.open('https://docs.aws.amazon.com/nova/latest/nova2-userguide/nova-act.html','_blank')" class="model-pill" id="pill-act" title="Nova Act â€” Browser automation">
        <span class="pill-dot"></span>Nova Act
      </button>
      <span class="text-xs text-[#D6D3D1] ml-auto">Click any pill â†’ AWS docs</span>
    </div>
  </div>

  <main class="pt-14" style="position:relative;z-index:1;">

    <!-- ===== WELCOME VIEW ===== -->
    <section id="view-welcome" class="min-h-screen flex flex-col relative overflow-hidden">

      <!-- Scattered sparkle decoratives (position:absolute inline ensures they never render as flow text) -->
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:17%;left:5%;font-size:20px;">âœ¦</span>
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:44%;left:2%;font-size:11px;color:#ea580c;opacity:0.22;animation-delay:1.3s;">âœ¦</span>
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:72%;left:11%;font-size:14px;animation-delay:0.7s;">+</span>
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:28%;right:5%;font-size:13px;color:#ea580c;opacity:0.20;animation-delay:2.1s;">âœ¦</span>
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:82%;right:7%;font-size:17px;animation-delay:0.4s;">âœ¦</span>
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:60%;right:3%;font-size:10px;animation-delay:1.8s;">+</span>
      <span aria-hidden="true" class="sparkle" style="position:absolute;top:10%;right:22%;font-size:9px;animation-delay:3s;">âœ¦</span>

      <!-- Hero â€” two column grid -->
      <div class="hero-layout max-w-6xl mx-auto px-6 pt-20 pb-10 w-full">

        <!-- LEFT: text content -->
        <div class="hero-left">

          <!-- Headline -->
          <h1 class="hero-h1 text-5xl font-extrabold text-[#1C1917] mb-6 leading-[1.06] tracking-tight">
            You may be entitled to<br/>
            <span class="gradient-text">more help than you know.</span>
          </h1>

          <!-- Subtext -->
          <p class="hero-p text-[1.0625rem] text-[#57534E] mb-10 leading-relaxed font-light" style="max-width:440px;">
            Compass uses AI to discover government benefits you qualify for â€”
            food, healthcare, housing, and more.
            <strong class="font-semibold text-[#44403C]">Conversational. Multilingual. Free.</strong>
          </p>

          <!-- Stats â€” clean inline strip, no cards -->
          <div class="hero-stats-strip flex items-start gap-7 mb-10">
            <div>
              <div class="hero-stat-number text-[2.4rem] font-extrabold text-ember leading-none mb-1">$30B</div>
              <div class="text-[11px] text-[#A8A29E] leading-snug" style="max-width:88px;">Unclaimed benefits yearly</div>
            </div>
            <div class="w-px self-stretch bg-[#E5DDD3] mx-1"></div>
            <div>
              <div class="hero-stat-number text-[2.4rem] font-extrabold text-[#1C1917] leading-none mb-1">7M</div>
              <div class="text-[11px] text-[#A8A29E] leading-snug" style="max-width:88px;">Americans miss SNAP benefits</div>
            </div>
            <div class="w-px self-stretch bg-[#E5DDD3] mx-1"></div>
            <div>
              <div class="hero-stat-number text-[2.4rem] font-extrabold text-[#1C1917] leading-none mb-1">60%</div>
              <div class="text-[11px] text-[#A8A29E] leading-snug" style="max-width:88px;">Of seniors miss Medicare savings</div>
            </div>
          </div>

          <!-- CTAs -->
          <div class="flex flex-wrap items-center gap-3 mb-8">
            <button onclick="App.startVoice()" id="btn-start-voice"
              class="hero-cta-primary flex items-center gap-2.5 px-6 py-3 rounded-full font-bold text-sm text-white"
              style="background:#15803D;color:white;"
              aria-label="Start voice conversation">
              <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                <line x1="12" y1="19" x2="12" y2="23"/>
              </svg>
              Start with Voice
            </button>
            <button onclick="App.startChat()"
              class="hero-cta-secondary flex items-center gap-2 px-5 py-3 rounded-full font-semibold text-sm">
              Type instead â†’
            </button>
          </div>

          <!-- Language Selector â€” custom dropdown -->
          <div class="flex items-center gap-3 mb-8">
            <span class="text-[#A8A29E] text-sm">Language:</span>
            <div class="lang-picker relative" id="lang-picker">
              <button type="button" onclick="toggleLangPicker()"
                class="lang-picker-btn flex items-center gap-2 border border-[#E5DDD3] rounded-lg px-3 py-1.5 text-sm text-[#44403C] bg-white hover:border-forest transition-colors">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                </svg>
                <span id="lang-picker-label">English</span>
                <svg id="lang-picker-chevron" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" style="transition:transform 0.2s;flex-shrink:0;">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </button>
              <div id="lang-picker-menu" class="hidden absolute top-full mt-1.5 left-0 w-36 bg-white border border-[#E5DDD3] rounded-xl overflow-hidden z-50" style="box-shadow:0 8px 24px rgba(28,25,23,0.10);">
                <button type="button" onclick="selectLang('en','English')" class="w-full text-left px-4 py-2.5 text-sm text-[#1C1917] hover:bg-[#F5F5F4] font-medium transition-colors">English</button>
                <button type="button" onclick="selectLang('es','EspaÃ±ol')" class="w-full text-left px-4 py-2.5 text-sm text-[#1C1917] hover:bg-[#F5F5F4] transition-colors">EspaÃ±ol</button>
                <button type="button" onclick="selectLang('fr','FranÃ§ais')" class="w-full text-left px-4 py-2.5 text-sm text-[#1C1917] hover:bg-[#F5F5F4] transition-colors">FranÃ§ais</button>
              </div>
            </div>
          </div>

          <!-- Nova models footer -->
          <div class="flex items-center gap-5 text-xs text-[#A8A29E]">
            <span class="flex items-center gap-1.5"><span class="nova-footer-dot"></span>Nova 2 Lite</span>
            <span class="flex items-center gap-1.5"><span class="nova-footer-dot"></span>Nova 2 Sonic</span>
            <span class="flex items-center gap-1.5"><span class="nova-footer-dot"></span>Nova Embeddings</span>
            <span class="flex items-center gap-1.5"><span class="nova-footer-dot"></span>Nova Act</span>
          </div>

        </div><!-- /hero-left -->

        <!-- RIGHT: decorative concentric circles (paper-cut style) -->
        <div class="hero-right flex items-center justify-center">
          <div class="hero-circle-wrap relative">

            <!-- Paper-cut depth layers â€” outermost to innermost -->
            <div class="hc hc-5"></div>
            <div class="hc hc-4"></div>
            <div class="hc hc-3"></div>
            <div class="hc hc-2"></div>

            <!-- Center: Compass icon on forest green -->
            <div class="hc hc-1 flex items-center justify-center flex-col gap-1.5">
              <div class="w-14 h-14 rounded-2xl flex items-center justify-center" style="background:rgba(255,255,255,0.18);">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88"/>
                </svg>
              </div>
              <span class="text-white text-[9px] font-bold tracking-[0.15em] uppercase" style="opacity:0.75;">Compass</span>
            </div>

            <!-- Sample result cards â€” show judges what Compass actually finds -->
            <div class="src-card" style="top:4%;right:-44%;animation-delay:0s;">
              <div class="src-label">SNAP Food Benefits</div>
              <div class="src-value">$847<span class="src-unit">/mo</span></div>
              <div class="src-badge src-high">
                <span class="src-dot"></span>High likelihood
              </div>
            </div>

            <div class="src-card src-card-amber" style="top:44%;right:-46%;animation-delay:0.4s;">
              <div class="src-label">EITC Tax Credit</div>
              <div class="src-value">$3,200<span class="src-unit"> est.</span></div>
              <div class="src-badge src-medium">
                <span class="src-dot" style="background:#f59e0b;"></span>Estimated
              </div>
            </div>

            <div class="src-card" style="bottom:6%;left:-44%;animation-delay:0.8s;">
              <div class="src-label">Medicaid</div>
              <div class="src-value" style="font-size:16px;margin-bottom:5px;">Healthcare<br/>Coverage</div>
              <div class="src-badge src-high">
                <span class="src-dot"></span>Eligible
              </div>
            </div>

          </div>
        </div><!-- /hero-right -->

      </div><!-- /hero-layout -->

      <!-- Demo section â€” below the fold -->
      <div class="max-w-6xl mx-auto px-6 pb-14 w-full">

        <!-- Label -->
        <div class="flex items-center gap-4 mb-6">
          <span class="text-xs font-bold demo-label uppercase tracking-widest">Try a live demo</span>
          <div class="h-px flex-1 bg-[#E5DDD3]"></div>
        </div>

        <!-- Persona Cards -->
        <div class="grid grid-cols-3 gap-4 max-w-2xl">

          <button onclick="App.runDemo('single_parent')" class="persona-card tilt-card group text-left">
            <div class="bar-ember h-1 w-full"></div>
            <div class="p-5">
              <div class="flex items-start justify-between mb-4">
                <div class="persona-icon-wrap" style="background:#FFF7ED;border-color:#FDBA74;">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#EA580C" stroke-width="1.8" stroke-linecap="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                  </svg>
                </div>
                <div class="w-6 h-6 rounded-full bg-ember-50 border border-[#FDBA74] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 scale-75 group-hover:scale-100">
                  <svg width="9" height="9" viewBox="0 0 16 16" fill="none" stroke="#EA580C" stroke-width="2.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
                </div>
              </div>
              <span class="font-bold text-sm block text-[#1C1917]">Single Parent</span>
              <span class="text-xs text-[#78716C] mt-1 block leading-snug">Mary Â· Lost her job Â· 2 kids Â· Oakland CA</span>
              <div class="mt-3 pt-2.5 border-t border-[#F0EAE0] flex items-center justify-between">
                <span class="text-[10px] text-[#A8A29E] font-medium uppercase tracking-wide">Demo</span>
                <span class="text-sm text-ember font-bold group-hover:translate-x-1 transition-transform inline-block">â†’</span>
              </div>
            </div>
          </button>

          <button onclick="App.runDemo('senior')" class="persona-card tilt-card group text-left">
            <div class="bar-sky h-1 w-full"></div>
            <div class="p-5">
              <div class="flex items-start justify-between mb-4">
                <div class="persona-icon-wrap" style="background:#F0F9FF;border-color:#7DD3FC;">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0EA5E9" stroke-width="1.8" stroke-linecap="round">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                  </svg>
                </div>
                <div class="w-6 h-6 rounded-full bg-sky-50 border border-[#7DD3FC] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 scale-75 group-hover:scale-100">
                  <svg width="9" height="9" viewBox="0 0 16 16" fill="none" stroke="#0EA5E9" stroke-width="2.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
                </div>
              </div>
              <span class="font-bold text-sm block text-[#1C1917]">Senior Citizen</span>
              <span class="text-xs text-[#78716C] mt-1 block leading-snug">Robert Â· Retired Â· SS income Â· San Antonio TX</span>
              <div class="mt-3 pt-2.5 border-t border-[#F0EAE0] flex items-center justify-between">
                <span class="text-[10px] text-[#A8A29E] font-medium uppercase tracking-wide">Demo</span>
                <span class="text-sm text-[#0EA5E9] font-bold group-hover:translate-x-1 transition-transform inline-block">â†’</span>
              </div>
            </div>
          </button>

          <button onclick="App.runDemo('veteran')" class="persona-card tilt-card group text-left">
            <div class="bar-forest h-1 w-full"></div>
            <div class="p-5">
              <div class="flex items-start justify-between mb-4">
                <div class="persona-icon-wrap" style="background:#F0FDF4;border-color:#86EFAC;">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#15803D" stroke-width="1.8" stroke-linecap="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                  </svg>
                </div>
                <div class="w-6 h-6 rounded-full bg-forest-50 border border-[#86EFAC] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 scale-75 group-hover:scale-100">
                  <svg width="9" height="9" viewBox="0 0 16 16" fill="none" stroke="#15803D" stroke-width="2.5"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
                </div>
              </div>
              <span class="font-bold text-sm block text-[#1C1917]">Veteran</span>
              <span class="text-xs text-[#78716C] mt-1 block leading-snug">James Â· Service disability Â· Part-time Â· Tampa FL</span>
              <div class="mt-3 pt-2.5 border-t border-[#F0EAE0] flex items-center justify-between">
                <span class="text-[10px] text-[#A8A29E] font-medium uppercase tracking-wide">Demo</span>
                <span class="text-sm text-forest font-bold group-hover:translate-x-1 transition-transform inline-block">â†’</span>
              </div>
            </div>
          </button>

        </div>

      </div><!-- /demo section -->

    </section>

    <!-- ===== CHAT VIEW ===== -->
    <section id="view-chat" class="hidden min-h-screen pt-[7.5rem] pb-4" style="background:rgba(249,245,238,0.96);">
      <div class="max-w-6xl mx-auto px-4 h-[calc(100vh-8rem)]">
        <div class="flex gap-4 h-full">

          <!-- Left: Conversation -->
          <div class="chat-left-panel flex-1 flex flex-col rounded-2xl overflow-hidden">

            <!-- Nova Sonic Voice Panel -->
            <div id="voice-panel" class="hidden border-b border-[#E5DDD3]/70 p-3" style="background:linear-gradient(135deg,#f0fdf4,#ecfdf5);">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm" style="background:linear-gradient(145deg,#1a9e4d,#15803D);">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="flex items-center gap-2">
                    <span class="text-xs font-bold text-forest">Nova 2 Sonic Voice</span>
                    <div id="voice-status-dot" class="w-2 h-2 rounded-full bg-[#A8A29E]"></div>
                    <span id="voice-status-text" class="text-xs text-[#78716C]">Click mic to speak</span>
                  </div>
                  <canvas id="waveform-canvas" class="w-full h-7 rounded mt-1.5 bg-forest/5" width="600" height="28"></canvas>
                </div>
                <button onclick="Voice.toggleRecording()" id="btn-mic-chat"
                  class="w-9 h-9 rounded-full flex items-center justify-center transition-colors shadow-sm flex-shrink-0">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                  </svg>
                </button>
              </div>
              <div id="transcript-display" class="mt-1.5 text-xs text-[#78716C] italic min-h-[1rem] pl-11"></div>
            </div>

            <!-- Messages -->
            <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin"></div>

            <!-- Input -->
            <div class="border-t border-[#E5DDD3]/70 bg-[#FAFAF9]/90 p-3">
              <div class="flex gap-2 items-end">
                <textarea id="chat-input" placeholder="Describe your situation..." rows="2"
                  class="flex-1 bg-white/90 border border-[#E5DDD3] rounded-xl px-4 py-2.5 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-forest/20 focus:border-forest placeholder-[#A8A29E] text-[#1C1917] transition-colors"
                  onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();App.sendMessage();}">
                </textarea>
                <div class="flex flex-col gap-1.5">
                  <button onclick="App.sendMessage()"
                    class="w-10 h-10 rounded-xl flex items-center justify-center transition-all shadow-sm hover:scale-105 hover:shadow-md"
                    style="background:linear-gradient(145deg,#1a9e4d,#15803D);">
                    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                      <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22,2 15,22 11,13 2,9"/>
                    </svg>
                  </button>
                  <label class="w-10 h-10 rounded-xl bg-white border border-[#E5DDD3] hover:border-forest hover:bg-forest-50 flex items-center justify-center transition-colors cursor-pointer hover:scale-105" title="Upload document">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#78716C" stroke-width="2">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                      <polyline points="17,8 12,3 7,8"/><line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <input type="file" class="hidden" accept="image/*,.pdf" id="file-input" onchange="App.uploadDocument(this)" />
                  </label>
                </div>
              </div>
              <!-- Sample document links -->
              <div class="mt-2 flex items-center gap-3">
                <span class="text-xs text-[#A8A29E]">Try a sample:</span>
                <button onclick="App.uploadSample('sample_pay_stub.png')"
                  class="text-xs text-forest hover:text-forest-600 font-semibold flex items-center gap-1 transition-colors hover:underline">
                  ðŸ“„ Pay Stub
                </button>
                <button onclick="App.uploadSample('sample_utility_bill.png')"
                  class="text-xs text-forest hover:text-forest-600 font-semibold flex items-center gap-1 transition-colors hover:underline">
                  ðŸ’¡ Utility Bill
                </button>
              </div>
            </div>
          </div>

          <!-- Right: Results Panel -->
          <div id="results-panel" class="w-80 flex flex-col gap-3 overflow-y-auto scrollbar-thin pb-2">

            <!-- Value Banner -->
            <div id="value-banner" class="hidden value-banner rounded-2xl p-5 text-center">
              <div class="text-xs text-forest font-bold tracking-widest uppercase mb-1">Estimated Annual Value</div>
              <div class="text-4xl font-extrabold text-[#14532D]" id="value-total">$0</div>
              <div class="text-xs text-[#57534E] mt-1" id="value-subline">Across 0 programs</div>
            </div>

            <!-- Document preview -->
            <div id="doc-preview-card" class="hidden bg-white/95 border border-[#E5DDD3] rounded-2xl p-4 shadow-sm">
              <h3 class="text-xs font-bold text-[#57534E] mb-2 flex items-center gap-2">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#78716C" stroke-width="2">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14,2 14,8 20,8"/>
                </svg>
                Document Analyzed â€” Nova Vision
              </h3>
              <img id="doc-preview-img" class="w-full rounded-lg mb-2 max-h-28 object-cover border border-[#E5DDD3]" alt="Document" />
              <div id="doc-analysis-result" class="text-xs text-[#78716C] space-y-0.5"></div>
            </div>

            <!-- Eligible Programs -->
            <div id="programs-card" class="hidden">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-xs font-bold text-[#44403C] flex items-center gap-2">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#15803D" stroke-width="2.5">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22,4 12,14.01 9,11.01"/>
                  </svg>
                  Programs You May Qualify For
                </h3>
                <div class="flex items-center gap-2">
                  <span id="programs-progress" class="text-xs text-[#78716C] font-medium"></span>
                  <button onclick="App.downloadReport()"
                          class="text-xs text-[#15803D] hover:text-[#166534] font-semibold flex items-center gap-1 transition-colors border border-[#BBF7D0] bg-[#F0FDF4] px-2 py-0.5 rounded-full hover:bg-[#DCFCE7]">
                    â†“ Save
                  </button>
                </div>
              </div>
              <div id="programs-list" class="space-y-2"></div>
            </div>

            <!-- Local Resources -->
            <div id="resources-card" class="hidden">
              <h3 class="text-xs font-bold text-[#44403C] mb-2 flex items-center gap-2">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#EA580C" stroke-width="2.5">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/>
                </svg>
                Local Resources Near You
              </h3>
              <div id="resources-list" class="space-y-2"></div>
            </div>

            <!-- Action Plan -->
            <div id="action-plan-card" class="hidden rounded-2xl p-4" style="background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border:1px solid rgba(167,243,208,0.5);">
              <h3 class="text-xs font-bold text-forest mb-3 flex items-center gap-2">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#15803D" stroke-width="2.5">
                  <polyline points="9,11 12,14 22,4"/>
                  <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                </svg>
                Your Action Plan
              </h3>
              <div id="action-plan-steps" class="space-y-2"></div>
            </div>

            <!-- Placeholder -->
            <div id="results-placeholder" class="flex flex-col items-center justify-center h-52 text-center bg-white/80 backdrop-blur rounded-2xl border border-dashed border-[#D6D3D1] p-6">
              <div class="w-12 h-12 rounded-full bg-forest-50 flex items-center justify-center mb-3 shadow-sm">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#15803D" stroke-width="1.5">
                  <circle cx="12" cy="12" r="10"/><polygon points="16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88"/>
                </svg>
              </div>
              <p class="text-[#A8A29E] text-sm leading-snug">Results appear here after Compass checks your eligibility</p>
            </div>

          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Bottom bar -->
  <div id="bottom-bar" class="hidden fixed bottom-0 left-0 right-0 z-40 px-5 py-2.5" style="background:rgba(255,255,255,0.88);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid rgba(229,221,211,0.6);">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
      <button onclick="App.goHome()" class="text-xs text-[#78716C] hover:text-[#1C1917] flex items-center gap-1.5 font-medium transition-colors">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        </svg>
        Home
      </button>
      <div class="flex items-center gap-2">
        <div class="w-2 h-2 rounded-full bg-forest animate-pulse" style="box-shadow:0 0 6px rgba(21,128,61,0.5);"></div>
        <span class="text-xs text-[#78716C] font-medium">Compass is ready to help</span>
      </div>
      <button onclick="Voice.toggleRecording()" id="btn-voice-bar"
        class="w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-sm hover:scale-110">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Loading overlay -->
  <div id="loading-overlay" class="hidden fixed inset-0 z-50 flex items-center justify-center" style="background:rgba(28,25,23,0.25);backdrop-filter:blur(6px);">
    <div class="glass-card rounded-2xl p-8 text-center max-w-xs" style="box-shadow:0 20px 60px rgba(28,25,23,0.15);">
      <div class="w-12 h-12 rounded-full border-2 border-forest border-t-transparent animate-spin mx-auto mb-4"></div>
      <p id="loading-text" class="text-[#1C1917] text-sm font-semibold">Analyzing your situation...</p>
      <p id="loading-model" class="text-xs text-ember mt-1 font-medium">Amazon Nova 2 Lite</p>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast-container" class="fixed top-20 right-4 z-50 flex flex-col gap-2 max-w-sm"></div>

  <!-- marked.js â€” Markdown parser for assistant responses -->
  <script src="https://cdn.jsdelivr.net/npm/marked@9/marked.min.js"></script>
  <script>
    marked.setOptions({ breaks: true, gfm: true });
  </script>

  <script src="/static/js/api.js?v=10"></script>
  <script src="/static/js/voice.js?v=10"></script>
  <script src="/static/js/app.js?v=10"></script>

  <!-- GSAP entrance + card tilt -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // â”€â”€ GSAP entrance animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      const welcome = document.getElementById('view-welcome');
      if (welcome && !welcome.classList.contains('hidden')) {
        const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });
        tl.from('.hero-h1',            { y: 32,  opacity: 0, duration: 0.7 })
          .from('.hero-p',             { y: 18,  opacity: 0, duration: 0.5 }, '-=0.35')
          .from('.hero-stats-strip > *', { y: 20, opacity: 0, duration: 0.45, stagger: 0.08 }, '-=0.3')
          .from('.hero-cta-primary, .hero-cta-secondary', { y: 16, opacity: 0, duration: 0.4, stagger: 0.1 }, '-=0.2')
          .from('.hero-right',         { x: 30,  opacity: 0, duration: 0.7, ease: 'power2.out' }, '-=0.5')
          .from('.persona-card',       { y: 28,  opacity: 0, duration: 0.4, stagger: 0.1 }, '-=0.2');
      }

      // â”€â”€ Card tilt effect â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      initCardTilt();
    });

    // â”€â”€ Custom language picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function toggleLangPicker() {
      const menu = document.getElementById('lang-picker-menu');
      const chevron = document.getElementById('lang-picker-chevron');
      const isOpen = !menu.classList.contains('hidden');
      menu.classList.toggle('hidden', isOpen);
      chevron.style.transform = isOpen ? '' : 'rotate(180deg)';
    }
    function selectLang(code, label) {
      document.getElementById('lang-picker-label').textContent = label;
      document.getElementById('lang-picker-menu').classList.add('hidden');
      document.getElementById('lang-picker-chevron').style.transform = '';
      if (typeof App !== 'undefined') App.setLanguage(code);
    }
    document.addEventListener('click', e => {
      const picker = document.getElementById('lang-picker');
      if (picker && !picker.contains(e.target)) {
        document.getElementById('lang-picker-menu').classList.add('hidden');
        document.getElementById('lang-picker-chevron').style.transform = '';
      }
    });

    function initCardTilt() {
      document.querySelectorAll('.tilt-card').forEach(card => {
        card.addEventListener('mousemove', e => {
          // Disable transition during tracking so the card follows cursor instantly (no jitter)
          card.style.transition = 'none';
          const r = card.getBoundingClientRect();
          const x = (e.clientX - r.left  - r.width  / 2) / (r.width  / 2);
          const y = (e.clientY - r.top   - r.height / 2) / (r.height / 2);
          card.style.transform = `perspective(900px) rotateX(${-y * 7}deg) rotateY(${x * 7}deg) translateZ(6px) translateY(-3px)`;
        });
        card.addEventListener('mouseleave', () => {
          // Re-enable smooth spring-back on leave
          card.style.transition = 'transform 0.55s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.25s ease, border-color 0.25s ease';
          card.style.transform = 'perspective(900px) rotateX(0deg) rotateY(0deg) translateZ(0) translateY(0)';
        });
      });
    }
  </script>

</body>
</html>
